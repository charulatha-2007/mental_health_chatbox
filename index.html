<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mindful Companion - Mental Wellness Chatbot</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        :root {
            --primary: #5b8fb9;
            --secondary: #6c63ff;
            --accent: #30c3a5;
            --light: #f8f9fa;
            --dark: #2c3e50;
            --gray: #6c757d;
            --light-gray: #e9ecef;
            --shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        body {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            color: var(--dark);
            line-height: 1.6;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        header {
            background-color: white;
            box-shadow: var(--shadow);
            padding: 1rem 2rem;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 1200px;
            margin: 0 auto;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
            cursor: pointer;
        }

        .logo-icon {
            color: var(--primary);
            font-size: 1.8rem;
        }

        .logo-text {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary);
        }

        nav ul {
            display: flex;
            list-style: none;
            gap: 1.5rem;
        }

        nav a {
            text-decoration: none;
            color: var(--dark);
            font-weight: 500;
            transition: color 0.3s;
            cursor: pointer;
        }

        nav a:hover {
            color: var(--primary);
        }

        nav a.active {
            color: var(--primary);
            font-weight: 600;
        }

        main {
            flex: 1;
            max-width: 1200px;
            margin: 2rem auto;
            padding: 0 2rem;
            width: 100%;
        }

        .page {
            display: none;
        }

        .page.active {
            display: block;
        }

        .hero {
            text-align: center;
            margin-bottom: 3rem;
            padding: 2rem;
            background-color: white;
            border-radius: 10px;
            box-shadow: var(--shadow);
        }

        .hero h1 {
            font-size: 2.5rem;
            margin-bottom: 1rem;
            color: var(--primary);
        }

        .hero p {
            font-size: 1.2rem;
            color: var(--gray);
            max-width: 700px;
            margin: 0 auto;
        }

        .chat-container {
            display: flex;
            flex-direction: column;
            height: 500px;
            background-color: white;
            border-radius: 10px;
            box-shadow: var(--shadow);
            overflow: hidden;
            margin-bottom: 2rem;
        }

        .chat-header {
            background-color: var(--primary);
            color: white;
            padding: 1rem;
            text-align: center;
            font-weight: 600;
        }

        .chat-messages {
            flex: 1;
            padding: 1rem;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .message {
            max-width: 80%;
            padding: 0.8rem 1rem;
            border-radius: 15px;
            line-height: 1.4;
        }

        .bot-message {
            align-self: flex-start;
            background-color: var(--light-gray);
            border-bottom-left-radius: 5px;
        }

        .user-message {
            align-self: flex-end;
            background-color: var(--primary);
            color: white;
            border-bottom-right-radius: 5px;
        }

        .chat-input-container {
            display: flex;
            padding: 1rem;
            border-top: 1px solid var(--light-gray);
            background-color: white;
        }

        .chat-input {
            flex: 1;
            padding: 0.8rem 1rem;
            border: 1px solid var(--light-gray);
            border-radius: 25px;
            outline: none;
            font-size: 1rem;
        }

        .chat-input:focus {
            border-color: var(--primary);
        }

        .send-button {
            background-color: var(--primary);
            color: white;
            border: none;
            border-radius: 50%;
            width: 45px;
            height: 45px;
            margin-left: 0.5rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background-color 0.3s;
        }

        .send-button:hover {
            background-color: var(--secondary);
        }

        .resources {
            background-color: white;
            border-radius: 10px;
            box-shadow: var(--shadow);
            padding: 2rem;
            margin-bottom: 2rem;
        }

        .resources h2 {
            color: var(--primary);
            margin-bottom: 1.5rem;
            text-align: center;
        }

        .resource-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 1.5rem;
        }

        .resource-card {
            background-color: var(--light);
            border-radius: 8px;
            padding: 1.5rem;
            text-align: center;
            transition: transform 0.3s, box-shadow 0.3s;
            cursor: pointer;
        }

        .resource-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow);
        }

        .resource-icon {
            font-size: 2rem;
            color: var(--primary);
            margin-bottom: 1rem;
        }

        .resource-card h3 {
            margin-bottom: 0.5rem;
            color: var(--dark);
        }

        .resource-card p {
            color: var(--gray);
            font-size: 0.9rem;
        }

        .resource-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }

        .modal-content {
            background-color: white;
            border-radius: 10px;
            width: 90%;
            max-width: 600px;
            max-height: 80vh;
            overflow-y: auto;
            padding: 2rem;
            position: relative;
        }

        .close-modal {
            position: absolute;
            top: 1rem;
            right: 1.5rem;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--gray);
            transition: color 0.3s;
        }

        .close-modal:hover {
            color: var(--primary);
        }

        .modal-content h2 {
            color: var(--primary);
            margin-bottom: 1rem;
        }

        .modal-content p {
            margin-bottom: 1rem;
            line-height: 1.6;
        }

        .modal-list {
            margin-left: 1.5rem;
            margin-bottom: 1rem;
        }

        .modal-list li {
            margin-bottom: 0.5rem;
        }

        .info-section {
            background-color: white;
            border-radius: 10px;
            box-shadow: var(--shadow);
            padding: 2rem;
            margin-bottom: 2rem;
        }

        .info-section h2 {
            color: var(--primary);
            margin-bottom: 1.5rem;
            text-align: center;
        }

        .info-section h3 {
            color: var(--dark);
            margin: 1.5rem 0 1rem 0;
        }

        .team-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 1.5rem;
            margin-top: 1.5rem;
        }

        .team-member {
            text-align: center;
            padding: 1rem;
        }

        .team-member img {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            object-fit: cover;
            margin-bottom: 1rem;
            background-color: var(--light-gray);
        }

        .contact-form {
            display: flex;
            flex-direction: column;
            gap: 1rem;
            max-width: 600px;
            margin: 0 auto;
        }

        .form-group {
            display: flex;
            flex-direction: column;
        }

        .form-group label {
            margin-bottom: 0.5rem;
            font-weight: 500;
        }

        .form-group input,
        .form-group textarea {
            padding: 0.8rem;
            border: 1px solid var(--light-gray);
            border-radius: 5px;
            font-size: 1rem;
        }

        .form-group textarea {
            min-height: 150px;
            resize: vertical;
        }

        .submit-btn {
            background-color: var(--primary);
            color: white;
            border: none;
            border-radius: 5px;
            padding: 0.8rem 1.5rem;
            font-size: 1rem;
            cursor: pointer;
            transition: background-color 0.3s;
            align-self: flex-start;
        }

        .submit-btn:hover {
            background-color: var(--secondary);
        }

        footer {
            background-color: var(--dark);
            color: white;
            text-align: center;
            padding: 2rem;
            margin-top: auto;
        }

        .footer-content {
            max-width: 1200px;
            margin: 0 auto;
        }

        .disclaimer {
            font-size: 0.9rem;
            margin-top: 1rem;
            color: var(--light-gray);
        }

        @media (max-width: 768px) {
            .header-container {
                flex-direction: column;
                gap: 1rem;
            }

            nav ul {
                gap: 1rem;
            }

            .hero h1 {
                font-size: 2rem;
            }

            .message {
                max-width: 90%;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="header-container">
            <div class="logo" id="homeLink">
                <div class="logo-icon">üß†</div>
                <div class="logo-text">Mindful Companion</div>
            </div>
            <nav>
                <ul>
                    <li><a href="#" class="nav-link active" data-page="home">Home</a></li>
                    <li><a href="#" class="nav-link" data-page="resources">Resources</a></li>
                    <li><a href="#" class="nav-link" data-page="about">About</a></li>
                    <li><a href="#" class="nav-link" data-page="contact">Contact</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <main>
        <!-- Home Page -->
        <section class="page active" id="homePage">
            <section class="hero">
                <h1>Your Mental Wellness Companion</h1>
                <p>A safe space to express your thoughts, feelings, and concerns. Our chatbot is here to listen and provide helpful resources.</p>
            </section>

            <section class="chat-container">
                <div class="chat-header">
                    Chat with Mindful Companion
                </div>
                <div class="chat-messages" id="chatMessages">
                    <div class="message bot-message">
                        Hello! I'm your Mindful Companion. I'm here to listen and provide support. How are you feeling today?
                    </div>
                </div>
                <div class="chat-input-container">
                    <input type="text" class="chat-input" id="userInput" placeholder="Type your message here...">
                    <button class="send-button" id="sendButton">
                        <i class="fas fa-paper-plane"></i>
                    </button>
                </div>
            </section>

            <section class="resources">
                <h2>Mental Health Resources</h2>
                <div class="resource-grid">
                    <div class="resource-card" id="selfHelpCard">
                        <div class="resource-icon">üìö</div>
                        <h3>Self-Help Guides</h3>
                        <p>Access our collection of mental wellness guides and exercises.</p>
                    </div>
                    <div class="resource-card" id="crisisCard">
                        <div class="resource-icon">üìû</div>
                        <h3>Crisis Helplines</h3>
                        <p>Immediate support when you need someone to talk to.</p>
                    </div>
                    <div class="resource-card" id="mindfulnessCard">
                        <div class="resource-icon">üßò</div>
                        <h3>Mindfulness Exercises</h3>
                        <p>Practice mindfulness with guided meditation and breathing exercises.</p>
                    </div>
                    <div class="resource-card" id="supportCard">
                        <div class="resource-icon">üë•</div>
                        <h3>Support Groups</h3>
                        <p>Connect with others who understand what you're going through.</p>
                    </div>
                </div>
            </section>
        </section>

        <!-- Resources Page -->
        <section class="page" id="resourcesPage">
            <section class="hero">
                <h1>Mental Health Resources</h1>
                <p>Comprehensive resources to support your mental wellness journey.</p>
            </section>

            <section class="info-section">
                <h2>Available Resources</h2>
                <p>We've curated a collection of resources to help you on your mental wellness journey. Explore the different categories below to find the support that's right for you.</p>
                
                <div class="resource-grid">
                    <div class="resource-card" id="selfHelpCardResources">
                        <div class="resource-icon">üìö</div>
                        <h3>Self-Help Guides</h3>
                        <p>Access our collection of mental wellness guides and exercises.</p>
                    </div>
                    <div class="resource-card" id="crisisCardResources">
                        <div class="resource-icon">üìû</div>
                        <h3>Crisis Helplines</h3>
                        <p>Immediate support when you need someone to talk to.</p>
                    </div>
                    <div class="resource-card" id="mindfulnessCardResources">
                        <div class="resource-icon">üßò</div>
                        <h3>Mindfulness Exercises</h3>
                        <p>Practice mindfulness with guided meditation and breathing exercises.</p>
                    </div>
                    <div class="resource-card" id="supportCardResources">
                        <div class="resource-icon">üë•</div>
                        <h3>Support Groups</h3>
                        <p>Connect with others who understand what you're going through.</p>
                    </div>
                </div>
            </section>
        </section>

        <!-- About Page -->
        <section class="page" id="aboutPage">
            <section class="hero">
                <h1>About Mindful Companion</h1>
                <p>Learn more about our mission and the team behind this mental wellness initiative.</p>
            </section>

            <section class="info-section">
                <h2>Our Mission</h2>
                <p>Mindful Companion was created to provide accessible mental health support to anyone who needs it. We believe that everyone deserves a safe space to express their thoughts and feelings without judgment.</p>
                
                <h3>What We Offer</h3>
                <p>Our platform combines AI-powered conversation with carefully curated mental health resources to provide:</p>
                <ul class="modal-list">
                    <li>24/7 access to supportive conversation</li>
                    <li>Evidence-based mental health information</li>
                    <li>Crisis resources and helplines</li>
                    <li>Self-help guides and exercises</li>
                    <li>Connections to professional support when needed</li>
                </ul>

                <h3>Our Team</h3>
                <div class="team-grid">
                    <div class="team-member">
                        <div class="resource-icon">üë©‚Äçüíº</div>
                        <h4>Dr. Sarah Johnson</h4>
                        <p>Clinical Psychologist</p>
                    </div>
                    <div class="team-member">
                        <div class="resource-icon">üë®‚Äçüíª</div>
                        <h4>Michael Chen</h4>
                        <p>AI Developer</p>
                    </div>
                    <div class="team-member">
                        <div class="resource-icon">üë©‚Äçüéì</div>
                        <h4>Dr. Emily Rodriguez</h4>
                        <p>Mental Health Researcher</p>
                    </div>
                    <div class="team-member">
                        <div class="resource-icon">üë®‚Äçüè´</div>
                        <h4>David Wilson</h4>
                        <p>User Experience Designer</p>
                    </div>
                </div>
            </section>
        </section>

        <!-- Contact Page -->
        <section class="page" id="contactPage">
            <section class="hero">
                <h1>Contact Us</h1>
                <p>Get in touch with our team for questions, feedback, or collaboration opportunities.</p>
            </section>

            <section class="info-section">
                <h2>We'd Love to Hear From You</h2>
                <p>Whether you have questions about our services, want to provide feedback, or are interested in collaborating, we're here to help.</p>
                
                <div class="contact-form">
                    <div class="form-group">
                        <label for="name">Your Name</label>
                        <input type="text" id="name" placeholder="Enter your name">
                    </div>
                    
                    <div class="form-group">
                        <label for="email">Email Address</label>
                        <input type="email" id="email" placeholder="Enter your email">
                    </div>
                    
                    <div class="form-group">
                        <label for="subject">Subject</label>
                        <input type="text" id="subject" placeholder="What is this regarding?">
                    </div>
                    
                    <div class="form-group">
                        <label for="message">Your Message</label>
                        <textarea id="message" placeholder="Tell us how we can help you..."></textarea>
                    </div>
                    
                    <button class="submit-btn" id="submitContact">Send Message</button>
                </div>

                <h3>Other Ways to Reach Us</h3>
                <ul class="modal-list">
                    <li><strong>Email:</strong> support@mindfulcompanion.org</li>
                    <li><strong>Phone:</strong> +1 (800) 123-4567</li>
                    <li><strong>Address:</strong> 123 Wellness Street, Mental Health City, MH 12345</li>
                </ul>
            </section>
        </section>
    </main>

    <!-- Resource Modals -->
    <div class="resource-modal" id="selfHelpModal">
        <div class="modal-content">
            <span class="close-modal" id="closeSelfHelp">&times;</span>
            <h2>Self-Help Guides</h2>
            <p>Here are some helpful resources to support your mental wellness journey:</p>
            <ul class="modal-list">
                <li><strong>Cognitive Behavioral Therapy (CBT) Techniques</strong> - Learn to identify and challenge negative thought patterns</li>
                <li><strong>Journaling Prompts</strong> - Express your thoughts and feelings through writing</li>
                <li><strong>Mood Tracking</strong> - Monitor your emotional patterns and triggers</li>
                <li><strong>Sleep Hygiene Guide</strong> - Improve your sleep quality for better mental health</li>
                <li><strong>Stress Management Workbook</strong> - Practical exercises to reduce daily stress</li>
                <li><strong>Positive Psychology Exercises</strong> - Activities to cultivate happiness and resilience</li>
                <li><strong>Anger Management Techniques</strong> - Healthy ways to express and manage anger</li>
            </ul>
            <p>Remember, self-help is most effective when combined with professional support when needed.</p>
        </div>
    </div>

    <div class="resource-modal" id="crisisModal">
        <div class="modal-content">
            <span class="close-modal" id="closeCrisis">&times;</span>
            <h2>Crisis Helplines</h2>
            <p>If you're in crisis or need immediate support, these resources are available 24/7:</p>
            <ul class="modal-list">
                <li><strong>National Suicide Prevention Lifeline</strong>: 1-800-273-8255</li>
                <li><strong>Crisis Text Line</strong>: Text HOME to 741741</li>
                <li><strong>Emergency Services</strong>: 911</li>
                <li><strong>Substance Abuse and Mental Health Services Administration (SAMHSA)</strong>: 1-800-662-4357</li>
                <li><strong>National Alliance on Mental Illness (NAMI) Helpline</strong>: 1-800-950-6264</li>
                <li><strong>Veterans Crisis Line</strong>: 1-800-273-8255 and press 1</li>
                <li><strong>Disaster Distress Helpline</strong>: 1-800-985-5990</li>
            </ul>
            <p>You don't have to face difficult moments alone. Reach out - help is available.</p>
        </div>
    </div>

    <div class="resource-modal" id="mindfulnessModal">
        <div class="modal-content">
            <span class="close-modal" id="closeMindfulness">&times;</span>
            <h2>Mindfulness Exercises</h2>
            <p>Practice these mindfulness techniques to center yourself and reduce stress:</p>
            <ul class="modal-list">
                <li><strong>5-4-3-2-1 Grounding</strong> - Notice 5 things you see, 4 things you feel, 3 things you hear, 2 things you smell, and 1 thing you taste</li>
                <li><strong>Box Breathing</strong> - Inhale for 4 counts, hold for 4 counts, exhale for 4 counts, hold for 4 counts</li>
                <li><strong>Body Scan Meditation</strong> - Slowly bring awareness to each part of your body from head to toe</li>
                <li><strong>Mindful Walking</strong> - Focus on the sensation of each step as you walk slowly</li>
                <li><strong>Loving-Kindness Meditation</strong> - Send wishes of happiness and peace to yourself and others</li>
                <li><strong>Mindful Eating</strong> - Pay full attention to the experience of eating without distractions</li>
                <li><strong>Progressive Muscle Relaxation</strong> - Tense and release each muscle group to relieve tension</li>
            </ul>
            <p>Regular mindfulness practice can help reduce anxiety and improve emotional regulation.</p>
        </div>
    </div>

    <div class="resource-modal" id="supportModal">
        <div class="modal-content">
            <span class="close-modal" id="closeSupport">&times;</span>
            <h2>Support Groups</h2>
            <p>Connecting with others who share similar experiences can be incredibly healing:</p>
            <ul class="modal-list">
                <li><strong>NAMI Connection Recovery Support Group</strong> - Peer-led groups for adults living with mental health conditions</li>
                <li><strong>Anxiety and Depression Association of America (ADAA) Online Support Group</strong> - Virtual meetings for anxiety and depression</li>
                <li><strong>Mental Health America (MHA) Support Communities</strong> - Online forums for various mental health concerns</li>
                <li><strong>7 Cups of Tea</strong> - Free online text chat with trained listeners and support communities</li>
                <li><strong>Psychology Today Support Group Directory</strong> - Search for local in-person support groups</li>
                <li><strong>Smart Recovery</strong> - Science-based addiction recovery support groups</li>
                <li><strong>GriefShare</strong> - Support groups for those grieving the loss of a loved one</li>
            </ul>
            <p>Sharing your journey with others who understand can reduce feelings of isolation and provide practical coping strategies.</p>
        </div>
    </div>

    <footer>
        <div class="footer-content">
            <p>Mindful Companion - Your Mental Wellness Chatbot</p>
            <p class="disclaimer">Note: This chatbot is not a substitute for professional mental health care. If you're in crisis, please contact a mental health professional or emergency services.</p>
        </div>
    </footer>

    <script>
        // Chatbot functionality
        document.addEventListener('DOMContentLoaded', function() {
            const chatMessages = document.getElementById('chatMessages');
            const userInput = document.getElementById('userInput');
            const sendButton = document.getElementById('sendButton');
            
            // Navigation functionality
            const navLinks = document.querySelectorAll('.nav-link');
            const pages = document.querySelectorAll('.page');
            const homeLink = document.getElementById('homeLink');
            
            // Conversation state tracking
            let conversationState = {
                lastTopic: '',
                repeatCount: 0,
                userName: ''
            };
            
            // Predefined responses for the chatbot
            const botResponses = {
                greetings: [
                    "Hello! How are you feeling today?",
                    "Hi there! I'm here to listen. What's on your mind?",
                    "Welcome! I'm glad you're reaching out. How can I support you today?"
                ],
                feelings: {
                    sad: [
                        "I'm sorry to hear you're feeling sad. It's okay to feel this way. Would you like to talk about what's bothering you?",
                        "Feeling sad can be really difficult. Remember that these feelings are temporary. Is there something specific that's been on your mind?",
                        "Thank you for sharing that you're feeling sad. It takes courage to acknowledge these emotions. What might help you feel a little better right now?"
                    ],
                    anxious: [
                        "Anxiety can be really challenging. Have you tried any breathing exercises to help calm your mind?",
                        "I understand that anxiety can feel overwhelming. Sometimes focusing on your senses can help ground you. What's happening around you right now?",
                        "Thank you for sharing that you're feeling anxious. Would it help to talk through what's causing these feelings?"
                    ],
                    stressed: [
                        "Stress can feel overwhelming. Sometimes breaking things down into smaller tasks can help. What's causing you stress right now?",
                        "I hear that you're feeling stressed. Remember to take breaks and be kind to yourself. Is there one small thing you could do to reduce your stress?",
                        "Stress can really take a toll. What self-care practices have helped you manage stress in the past?"
                    ],
                    happy: [
                        "That's wonderful to hear! I'm glad you're feeling happy. What's contributing to your good mood today?",
                        "It's great that you're feeling happy! Savor these positive moments. Is there something special that happened recently?",
                        "Happiness is such a gift. What are you enjoying about this feeling right now?"
                    ],
                    tired: [
                        "It sounds like you might need some rest. Remember that self-care is important. Are you getting enough sleep?",
                        "Feeling tired can impact everything. What helps you recharge when you're feeling this way?",
                        "Thank you for sharing that you're feeling tired. It's important to listen to your body's needs. Is there a way you could give yourself a break today?"
                    ]
                },
                resources: [
                    "I can suggest some resources that might help. Would you like information on mindfulness exercises, crisis helplines, or self-help guides?",
                    "There are many helpful resources available. Let me know what type of support you're looking for.",
                    "I have information on various mental wellness resources. What would you be most interested in learning about?"
                ],
                followUp: [
                    "How has that been affecting your daily life?",
                    "What do you think might help improve this situation?",
                    "Have you tried any strategies to cope with these feelings?",
                    "What support do you have in your life right now?",
                    "Is there a small step you could take today to care for yourself?"
                ],
                encouragement: [
                    "You're showing great strength by talking about this.",
                    "It's okay to not have all the answers right now.",
                    "Remember to be gentle with yourself during difficult times.",
                    "You're not alone in this - many people experience similar feelings.",
                    "Taking things one step at a time is perfectly fine."
                ],
                default: [
                    "I'm here to listen. Could you tell me more about how you're feeling?",
                    "Thank you for sharing. How has this been affecting you?",
                    "I understand. It's important to acknowledge these feelings. What do you think might help you feel better?",
                    "That sounds challenging. Remember that it's okay to not be okay sometimes. Would you like to explore some coping strategies?",
                    "I appreciate you opening up about this. What would be most helpful for you right now?"
                ]
            };

            // Navigation functionality
            function showPage(pageId) {
                // Hide all pages
                pages.forEach(page => {
                    page.classList.remove('active');
                });
                
                // Show selected page
                const activePage = document.getElementById(pageId);
                if (activePage) {
                    activePage.classList.add('active');
                }
                
                // Update active nav link
                navLinks.forEach(link => {
                    link.classList.remove('active');
                    if (link.getAttribute('data-page') === pageId.replace('Page', '')) {
                        link.classList.add('active');
                    }
                });
            }
            
            // Set up navigation event listeners
            navLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    const pageId = this.getAttribute('data-page') + 'Page';
                    showPage(pageId);
                });
            });
            
            // Home logo click event
            homeLink.addEventListener('click', function() {
                showPage('homePage');
            });
            
            // Contact form submission
            const submitContact = document.getElementById('submitContact');
            if (submitContact) {
                submitContact.addEventListener('click', function() {
                    const name = document.getElementById('name').value;
                    const email = document.getElementById('email').value;
                    const subject = document.getElementById('subject').value;
                    const message = document.getElementById('message').value;
                    
                    if (name && email && subject && message) {
                        alert('Thank you for your message! We will get back to you soon.');
                        // In a real application, you would send this data to a server
                        document.getElementById('name').value = '';
                        document.getElementById('email').value = '';
                        document.getElementById('subject').value = '';
                        document.getElementById('message').value = '';
                    } else {
                        alert('Please fill in all fields before submitting.');
                    }
                });
            }

            // Function to add a message to the chat
            function addMessage(message, isUser) {
                const messageDiv = document.createElement('div');
                messageDiv.classList.add('message');
                messageDiv.classList.add(isUser ? 'user-message' : 'bot-message');
                messageDiv.textContent = message;
                chatMessages.appendChild(messageDiv);
                chatMessages.scrollTop = chatMessages.scrollHeight;
            }

            // Function to get a random response from an array
            function getRandomResponse(responses) {
                return responses[Math.floor(Math.random() * responses.length)];
            }

            // Function to process user input and generate bot response
            function processUserInput(input) {
                input = input.toLowerCase().trim();
                
                // Check for greetings
                if (input.includes('hello') || input.includes('hi') || input.includes('hey')) {
                    conversationState.lastTopic = 'greeting';
                    conversationState.repeatCount = 0;
                    return getRandomResponse(botResponses.greetings);
                }
                
                // Check for name
                if (input.includes('my name is') || input.includes("i'm") || input.includes('im ')) {
                    const nameMatch = input.match(/(?:my name is|i'm|im) (\w+)/i);
                    if (nameMatch && nameMatch[1]) {
                        conversationState.userName = nameMatch[1];
                        return `Nice to meet you, ${conversationState.userName}! How are you feeling today?`;
                    }
                }
                
                // Check for feelings
                if (input.includes('sad') || input.includes('depressed') || input.includes('down') || input.includes('unhappy')) {
                    conversationState.lastTopic = 'sad';
                    conversationState.repeatCount = 0;
                    return getRandomResponse(botResponses.feelings.sad);
                }
                if (input.includes('anxious') || input.includes('anxiety') || input.includes('nervous') || input.includes('worried')) {
                    conversationState.lastTopic = 'anxious';
                    conversationState.repeatCount = 0;
                    return getRandomResponse(botResponses.feelings.anxious);
                }
                if (input.includes('stressed') || input.includes('stress') || input.includes('overwhelmed') || input.includes('pressure')) {
                    conversationState.lastTopic = 'stressed';
                    conversationState.repeatCount = 0;
                    return getRandomResponse(botResponses.feelings.stressed);
                }
                if (input.includes('happy') || input.includes('good') || input.includes('great') || input.includes('well')) {
                    conversationState.lastTopic = 'happy';
                    conversationState.repeatCount = 0;
                    return getRandomResponse(botResponses.feelings.happy);
                }
                if (input.includes('tired') || input.includes('exhausted') || input.includes('fatigued') || input.includes('sleep')) {
                    conversationState.lastTopic = 'tired';
                    conversationState.repeatCount = 0;
                    return getRandomResponse(botResponses.feelings.tired);
                }
                
                // Check for resource requests
                if (input.includes('resource') || input.includes('help') || input.includes('support') || 
                    input.includes('guide') || input.includes('exercise')) {
                    conversationState.lastTopic = 'resources';
                    conversationState.repeatCount = 0;
                    return getRandomResponse(botResponses.resources);
                }
                
                // Check for thanks
                if (input.includes('thank') || input.includes('thanks')) {
                    conversationState.lastTopic = 'thanks';
                    conversationState.repeatCount = 0;
                    return "You're welcome! I'm glad I could help. Is there anything else you'd like to talk about?";
                }
                
                // Handle repeated topics
                if (conversationState.lastTopic && conversationState.repeatCount < 2) {
                    conversationState.repeatCount++;
                    
                    if (conversationState.lastTopic in botResponses.feelings) {
                        if (conversationState.repeatCount === 1) {
                            return getRandomResponse(botResponses.followUp);
                        } else {
                            return getRandomResponse(botResponses.encouragement);
                        }
                    }
                }
                
                // Default response with variety
                conversationState.lastTopic = 'default';
                conversationState.repeatCount = (conversationState.lastTopic === 'default') ? 
                    conversationState.repeatCount + 1 : 0;
                
                // If we've used many default responses, suggest a change
                if (conversationState.repeatCount > 3) {
                    return "I notice we've been talking in circles a bit. Would you like to explore some specific coping strategies or resources that might help?";
                }
                
                return getRandomResponse(botResponses.default);
            }

            // Function to handle sending a message
            function sendMessage() {
                const message = userInput.value.trim();
                if (message === '') return;
                
                // Add user message to chat
                addMessage(message, true);
                userInput.value = '';
                
                // Simulate typing delay
                setTimeout(() => {
                    // Generate and add bot response
                    const botResponse = processUserInput(message);
                    addMessage(botResponse, false);
                }, 1000);
            }

            // Resource modal functionality
            const selfHelpCard = document.getElementById('selfHelpCard');
            const crisisCard = document.getElementById('crisisCard');
            const mindfulnessCard = document.getElementById('mindfulnessCard');
            const supportCard = document.getElementById('supportCard');
            
            // Resource cards on Resources page
            const selfHelpCardResources = document.getElementById('selfHelpCardResources');
            const crisisCardResources = document.getElementById('crisisCardResources');
            const mindfulnessCardResources = document.getElementById('mindfulnessCardResources');
            const supportCardResources = document.getElementById('supportCardResources');
            
            const selfHelpModal = document.getElementById('selfHelpModal');
            const crisisModal = document.getElementById('crisisModal');
            const mindfulnessModal = document.getElementById('mindfulnessModal');
            const supportModal = document.getElementById('supportModal');
            
            const closeSelfHelp = document.getElementById('closeSelfHelp');
            const closeCrisis = document.getElementById('closeCrisis');
            const closeMindfulness = document.getElementById('closeMindfulness');
            const closeSupport = document.getElementById('closeSupport');
            
            // Self-help guides modal
            if (selfHelpCard) {
                selfHelpCard.addEventListener('click', function() {
                    selfHelpModal.style.display = 'flex';
                });
            }
            
            if (selfHelpCardResources) {
                selfHelpCardResources.addEventListener('click', function() {
                    selfHelpModal.style.display = 'flex';
                });
            }
            
            closeSelfHelp.addEventListener('click', function() {
                selfHelpModal.style.display = 'none';
            });
            
            // Crisis helplines modal
            if (crisisCard) {
                crisisCard.addEventListener('click', function() {
                    crisisModal.style.display = 'flex';
                });
            }
            
            if (crisisCardResources) {
                crisisCardResources.addEventListener('click', function() {
                    crisisModal.style.display = 'flex';
                });
            }
            
            closeCrisis.addEventListener('click', function() {
                crisisModal.style.display = 'none';
            });
            
            // Mindfulness exercises modal
            if (mindfulnessCard) {
                mindfulnessCard.addEventListener('click', function() {
                    mindfulnessModal.style.display = 'flex';
                });
            }
            
            if (mindfulnessCardResources) {
                mindfulnessCardResources.addEventListener('click', function() {
                    mindfulnessModal.style.display = 'flex';
                });
            }
            
            closeMindfulness.addEventListener('click', function() {
                mindfulnessModal.style.display = 'none';
            });
            
            // Support groups modal
            if (supportCard) {
                supportCard.addEventListener('click', function() {
                    supportModal.style.display = 'flex';
                });
            }
            
            if (supportCardResources) {
                supportCardResources.addEventListener('click', function() {
                    supportModal.style.display = 'flex';
                });
            }
            
            closeSupport.addEventListener('click', function() {
                supportModal.style.display = 'none';
            });
            
            // Close modals when clicking outside
            window.addEventListener('click', function(event) {
                if (event.target === selfHelpModal) {
                    selfHelpModal.style.display = 'none';
                }
                if (event.target === crisisModal) {
                    crisisModal.style.display = 'none';
                }
                if (event.target === mindfulnessModal) {
                    mindfulnessModal.style.display = 'none';
                }
                if (event.target === supportModal) {
                    supportModal.style.display = 'none';
                }
            });

            // Event listeners for chat
            sendButton.addEventListener('click', sendMessage);
            userInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    sendMessage();
                }
            });

            // Add initial bot message if chat is empty
            if (chatMessages.children.length === 0) {
                addMessage("Hello! I'm your Mindful Companion. I'm here to listen and provide support. How are you feeling today?", false);
            }
        });
    </script>
</body>
</html>
